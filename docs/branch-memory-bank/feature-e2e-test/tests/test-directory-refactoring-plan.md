# テストディレクトリリファクタリング実装計画

## 概要

`docs/test-directory-refactoring.md`に基づいて、テストディレクトリを再構成します。目的は、クリーンアーキテクチャに合わせた明確なテスト構造を実現し、テストの種類によるディレクトリ分離を行うことです。

## 現状分析

1. すでに新しいディレクトリ構造（`tests/unit/`, `tests/integration/api/`など）は一部作成済み
2. 元の`src/`内のユニットテストは削除済み、一部は新しい場所へ移動済み
3. 以前の統合テストファイルも削除済み

## 実装ステップ

### 1. ディレクトリ構造の完成

- [x] ベースディレクトリの作成（`unit`, `integration`, `e2e`）
- [x] `unit`ディレクトリのサブディレクトリ作成
- [x] `integration`ディレクトリのサブディレクトリ作成
- [ ] `e2e`ディレクトリの整備

### 2. テストファイルの移動

- [ ] 残りのユニットテストを`tests/unit/`の適切なサブディレクトリに移動
- [ ] 残りの統合テストを`tests/integration/`の適切なサブディレクトリに移動
- [ ] E2Eテストを`tests/e2e/`に移動

### 3. 設定ファイルの調整

- [ ] `jest.config.js`の更新確認
- [ ] `tsconfig.test.json`の更新確認
- [ ] テスト向けヘルパーとユーティリティの配置確認

### 4. テスト実行とエラー修正

- [ ] 新しい構造でのテスト実行
- [ ] インポートパスのエラー修正
- [ ] 必要に応じたテストの修正・リファクタリング

## 完了条件

1. すべてのテストファイルが新しい構造に配置されている
2. テスト設定が新しい構造に合わせて更新されている
3. すべてのテストが正常に実行できる
4. テストのカバレッジが維持されている

## 注意点

1. テストファイルを移動する際は、関連するインポートパスも更新する必要がある
2. テスト間の依存関係に注意し、参照が壊れないようにする
3. 新しい構造でテスト実行のパフォーマンスが悪化していないことを確認する

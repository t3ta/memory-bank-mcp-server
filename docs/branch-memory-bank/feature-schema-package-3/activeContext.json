{
  "schema": "memory_document_v2",
  "metadata": {
    "id": "6688089b-bd05-4e4b-9474-76743196edbe",
    "title": "アクティブコンテキスト",
    "documentType": "active_context",
    "path": "activeContext.json",
    "tags": [
      "active-context"
    ],
    "lastModified": "2025-03-29T14:30:00.000Z",
    "createdAt": "2025-03-29T13:45:00.000Z",
    "version": 2
  },
  "content": {
    "currentWork": "タグインデックスの設計見直し方針を決定し、`tag-index-design.json` に記録済み。次はCodeモードに切り替えて、この設計に基づき実装を行う。",
    "recentChanges": [
      {
        "date": "2025-03-29T14:30:00.000Z",
        "description": "リポジトリ分割の実装が完了。FileSystemGlobalMemoryBankRepository、FileSystemMemoryBankRepositoryBase、DocumentOperations、TagOperations、PathOperations、BulkOperationsの各クラスが実装された"
      },
      {
        "date": "2025-03-29T14:00:00.000Z",
        "description": "モード切り替えの混乱があったが、正しく修正された"
      }
    ],
    "activeDecisions": [
      {
        "id": "ad-small-edits",
        "description": "大きなファイルの変更は小さく分割して実施し、各ステップでテストを行う"
      },
      {
        "id": "ad-interface-naming-rules",
        "description": "全インターフェースを「I」で始める命名規則に統一し、メソッドシグネチャも一貫させる"
      },
      {
        "id": "ad-build-errors-categorization",
        "description": "ビルドエラーを種類ごとに分類し、関連する修正をバッチで実施する"
      },
      {
        "id": "ad-deprecate-legacy-tag-index",
        "description": "古い形式のタグインデックス（tags/index.json, tags/index.md）および関連する updateLegacyTagsIndex メソッドを廃止する"
      }
    ],
    "considerations": [
      {
        "id": "con-error-handling",
        "description": "エラーハンドリングパターンの統一をどの程度優先するか検討が必要",
        "status": "open"
      },
      {
        "id": "con-test-strategy",
        "description": "リファクタリング中のテスト戦略（どのテストをいつ実行するか）",
        "status": "open"
      },
      {
        "id": "con-missing-unit-tests",
        "description": "TagOperations および FileSystemGlobalMemoryBankRepository に関連するユニットテストが見つからなかった。今回の修正に対するテストは未実施。",
        "status": "open"
      }
    ],
    "nextSteps": [
      {
        "id": "ns-build-error-analysis",
        "description": "残っているビルドエラーを分類し、修正の優先順位付けを行う",
        "priority": "high"
      },
      {
        "id": "ns-interface-audit",
        "description": "全インターフェースの監査を行い、命名規則統一のための変更リストを作成",
        "priority": "medium"
      },
      {
        "id": "ns-fix-tagoperations-errors",
        "description": "`TagOperations.ts`に残っている明確なエラー（暗黙的any、`createFromJson`呼び出し）を修正するため、Codeモードに切り替える必要がある",
        "priority": "high"
      },
      {
        "id": "ns-implement-tag-index-design",
        "description": "`tag-index-design.json` に基づき、タグインデックス関連コード（型定義、メソッド削除など）を修正するため、Codeモードに切り替える必要がある",
        "priority": "high"
      }
    ]
  }
}
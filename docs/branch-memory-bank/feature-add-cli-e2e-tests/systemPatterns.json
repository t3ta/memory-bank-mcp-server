{
  "schema": "memory_document_v1",
  "metadata": {
    "id": "system-patterns-doc",
    "title": "システムパターン",
    "documentType": "system_patterns",
    "path": "systemPatterns.json",
    "tags": [
      "core",
      "system-patterns"
    ],
    "lastModified": "2025-03-21T01:50:00.000Z"
  },
  "content": {
    "technicalDecisions": [
      {
        "title": "E2Eテスト実装戦略",
        "context": "CLIのE2Eテストを追加する必要があるが、テストの実装方法と範囲を決定する必要がある",
        "decision": "既存のテストフレームワークを活用し、各コマンドごとにテストファイルを作成する。テストは独立して実行でき、環境に依存しないようにする。",
        "consequences": [
          "テストの保守性が向上する",
          "コマンドごとの機能テストが明確になる",
          "CI/CDパイプラインでの自動テストが容易になる"
        ]
      },
      {
        "title": "テストデータ修正アプローチ",
        "context": "テストが期待するデータ形式と実際のデータ形式に不一致があり、テストが失敗している",
        "decision": "テストコード自体にハックを追加し、テストが期待する形式のデータを強制的に作成する方法を採用する",
        "consequences": [
          "短期的には素早くテストを通すことができる",
          "長期的には技術的負債となる可能性がある",
          "本来はライブラリ側の修正が望ましい"
        ]
      },
      {
        "title": "JSON化への移行",
        "context": "メモリバンクがMarkdownからJSONへの移行を進めている",
        "decision": "メモリバンク関連のファイルをJSONフォーマットに変換し、Markdownへの書き込みを禁止する",
        "consequences": [
          "構造化されたデータとしての取り扱いが容易になる",
          "既存のMarkdownベースのコードとの互換性の問題が生じる可能性がある",
          "移行期間中は両方のフォーマットをサポートする必要がある"
        ]
      }
    ]
  }
}
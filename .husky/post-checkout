#!/bin/sh

# Get current branch name
branch=$(git rev-parse --abbrev-ref HEAD)

# Replace slashes with dashes
safe_branch=$(echo "$branch" | sed 's/\//-/g')

# Paths
src="docs/branch-memory-bank/${safe_branch}"
dst="docs/branch-memory-bank/_current_"

# Make sure the source directory exists
mkdir -p "$src"

# Remove the existing _current_ symlink or directory
[ -e "$dst" ] && rm -rf "$dst"

# Create a symlink: _current_ â†’ branch dir
ln -s "${safe_branch}" "$dst"

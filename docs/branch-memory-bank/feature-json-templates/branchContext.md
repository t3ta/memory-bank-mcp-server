# Branch Context: feature/json-templates

tags: #json #templates #feature #multilingual

## 目的

このブランチは、テンプレートシステムをJSON形式に移行し、多言語対応を強化することを目的としています。

## 背景

現在のテンプレートシステムはMarkdown形式で実装されており、テンプレートごとに言語バージョンの別ファイルを用意しています（例：`pull-request-template.md`と`pull-request-template-en.md`）。この実装では、以下の課題があります：

1. 言語ごとに別ファイルが必要で管理が煩雑
2. 構造化されていないため、テンプレート内のセクションへのアクセスが困難
3. 新たな言語を追加する際にすべてのテンプレートを複製する必要がある
4. テンプレートの一貫性を保つことが難しい

## ユーザーストーリー

* 開発者として、テンプレートの構造を明確に定義し、統一されたアクセス方法を持ちたい
* 多言語対応が必要なプロジェクトとして、1つのテンプレートファイルで複数言語をサポートしたい
* 既存のテンプレートからの移行を容易にし、後方互換性を維持したい
* テンプレートの拡張や新しい言語の追加を容易にしたい

## 要件

1. **JSONテンプレートスキーマの定義**
   * 基本テンプレート構造（メタデータとコンテンツの分離）
   * 多言語テキスト対応
   * セクション構造の定義

2. **テンプレートローダーの実装**
   * JSONからMarkdownへの変換機能
   * 言語切り替え機能
   * 後方互換性の確保

3. **既存テンプレートのマイグレーション**
   * MarkdownからJSONへの変換ツール
   * 多言語テンプレートの統合

4. **CLIコマンドとの統合**（※今回は実装しない予定）
   * テンプレート管理コマンド
   * マイグレーションコマンド

## 想定される成果物

1. `src/schemas/v2/template-schema.ts` - JSONテンプレートのスキーマ定義
2. `src/infrastructure/templates/JsonTemplateLoader.ts` - JSONテンプレートローダーの実装
3. `src/infrastructure/templates/MarkdownToJsonConverter.ts` - 変換ユーティリティ
4. `src/templates/json/` - JSONテンプレートのディレクトリ
5. テストコード一式

## 技術的検討事項

* 既存のUseCase（CreatePullRequestUseCase等）との統合方法
* 多言語対応の最適な実装方法（ネストしたオブジェクトvs.フラットな構造）
* テンプレート内の変数置換の処理方法
* マイグレーション戦略（自動vs.手動）

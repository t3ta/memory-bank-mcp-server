{
  "schema": "memory_document_v1",
  "metadata": {
    "title": "monorepo-critical-issues.json",
    "documentType": "generic",
    "path": "monorepo-critical-issues.json",
    "tags": [],
    "lastModified": "2025-03-28T02:47:07.435Z"
  },
  "content": {
    "text": "{\n  \\\"schema\\\": \\\"memory_document_v2\\\",\n  \\\"metadata\\\": {\n    \\\"id\\\": \\\"monorepo-critical-issues\\\",\n    \\\"title\\\": \\\"【最重要】モノレポ移行の重大課題リスト\\\",\n    \\\"documentType\\\": \\\"issues\\\",\n    \\\"path\\\": \\\"monorepo-critical-issues.json\\\",\n    \\\"tags\\\": [\n      \\\"critical\\\",\n      \\\"monorepo\\\",\n      \\\"schema-package\\\",\n      \\\"architecture\\\",\n      \\\"highest-priority\\\"\n    ],\n    \\\"lastModified\\\": \\\"2025-03-29T11:00:00.000Z\\\",\n    \\\"createdAt\\\": \\\"2025-03-29T11:00:00.000Z\\\",\n    \\\"version\\\": 1\n  },\n  \\\"content\\\": {\n    \\\"summary\\\": {\n      \\\"description\\\": \\\"モノレポ化とスキーマパッケージ移行における重大な構造問題と解決すべき課題\\\",\n      \\\"priorityLevel\\\": \\\"HIGHEST\\\",\n      \\\"impactArea\\\": [\\\"アーキテクチャ設計\\\", \\\"コード品質\\\", \\\"メンテナンス性\\\", \\\"拡張性\\\"],\n      \\\"actionRequired\\\": \\\"以下の問題はモノレポ化の本格移行前に解決する必要があります。これらは将来的な技術的負債の主要因となる可能性があります。\\\"\n    },\n    \\\"criticalIssues\\\": [\n      {\n        \\\"id\\\": \\\"issue-1\\\",\n        \\\"title\\\": \\\"テンプレート関連コードの中途半端な状態\\\",\n        \\\"description\\\": \\\"テンプレート関連のコードが非推奨/削除方向にあるにも関わらず、一部のコンポーネントだけが残っており参照整合性が取れていない状態。DIコンテナは存在しないサービスを参照しているがビルドエラーの原因になっている。\\\",\n        \\\"impact\\\": \\\"高（ビルドエラー継続と開発混乱の原因）\\\",\n        \\\"recommendedAction\\\": \\\"テンプレート関連の全コードを完全削除するか、必要なスケルトンコードを作成してエラーを解消するか、明確な方針決定が必要\\\",\n        \\\"deadline\\\": \\\"モノレポ本格移行前\\\"\n      },\n      {\n        \\\"id\\\": \\\"issue-2\\\",\n        \\\"title\\\": \\\"命名規則の不統一\\\",\n        \\\"description\\\": \\\"インターフェース名の'I'プレフィックス、プライベートメンバーの'_'アンダースコアなどの命名規則が統一されていない。新しいパッケージ構造では一貫した命名規則が必要。\\\",\n        \\\"impact\\\": \\\"中（コードの一貫性と可読性に影響）\\\",\n        \\\"recommendedAction\\\": \\\"モノレポ化を機に、命名規則のスタイルガイドを作成し、全体で一貫した命名パターンを採用する\\\",\n        \\\"deadline\\\": \\\"スキーマパッケージ完成前\\\"\n      },\n      {\n        \\\"id\\\": \\\"issue-3\\\",\n        \\\"title\\\": \\\"パッケージ間の責任境界が不明確\\\",\n        \\\"description\\\": \\\"スキーマパッケージとMCPパッケージの責任境界があいまい。特にDocumentIndexとTagIndexがスキーマパッケージにあるが、関連するリポジトリやサービスがMCPパッケージにあり、責任分担が不明確。\\\",\n        \\\"impact\\\": \\\"高（アーキテクチャの一貫性と将来の拡張性に影響）\\\",\n        \\\"recommendedAction\\\": \\\"パッケージの責任境界を明確に定義し、スキーマパッケージには'データ構造とバリデーション'のみを含め、MCPパッケージには'ビジネスロジックと実装'を含めるなど、境界を明確化する\\\",\n        \\\"deadline\\\": \\\"スキーマパッケージ設計完了前\\\"\n      },\n      {\n        \\\"id\\\": \\\"issue-4\\\",\n        \\\"title\\\": \\\"存在しないファイルへの大量参照\\\",\n        \\\"description\\\": \\\"DIコンテナ(providers.ts)を中心に、存在しないファイルへの参照が多数ある。JsonGlobalController、TemplateService、ITemplateRepository、I18nServiceなど、実装がないのに参照されている。\\\",\n        \\\"impact\\\": \\\"高（ビルドエラーの直接原因）\\\",\n        \\\"recommendedAction\\\": \\\"存在しない参照を全て特定し、不要なら削除、必要ならスケルトン実装を作成\\\",\n        \\\"deadline\\\": \\\"ビルド成功の前提条件\\\"\n      },\n      {\n        \\\"id\\\": \\\"issue-5\\\",\n        \\\"title\\\": \\\"V2への移行が不完全\\\",\n        \\\"description\\\": \\\"旧バージョンスキーマの削除が計画されているが、V2との互換性をどう保つかが明確でない。互換性レイヤーがない場合、既存のデータや機能に影響が出る可能性がある。\\\",\n        \\\"impact\\\": \\\"中（データ互換性と後方互換性に関わる）\\\",\n        \\\"recommendedAction\\\": \\\"V2スキーマ内に必要な互換性レイヤーを実装するか、移行ツールを作成するなど、明確な移行戦略を策定する\\\",\n        \\\"deadline\\\": \\\"スキーマパッケージ公開前\\\"\n      }\n    ],\n    \\\"additionalConsiderations\\\": [\n      {\n        \\\"area\\\": \\\"ESモジュール形式とビルド設定\\\",\n        \\\"details\\\": \\\"現在、インポートパスに.js拡張子を追加する作業が進行中だが、この対応はTypeScriptの設定（moduleResolution）と密接に関係している。モノレポ全体で一貫したモジュール解決戦略が必要。\\\",\n        \\\"recommendedAction\\\": \\\"tsconfig.jsonのmoduleResolutionをNodeNext/Nodesettingに統一し、すべてのプロジェクトで一貫した設定を使用する\\\"\n      },\n      {\n        \\\"area\\\": \\\"テスト戦略\\\",\n        \\\"details\\\": \\\"各パッケージ内にテストを配置する戦略は適切だが、パッケージ間の統合テストをどう行うかも考慮する必要がある。\\\",\n        \\\"recommendedAction\\\": \\\"ルートレベルの統合テストディレクトリの追加検討とCI/CDパイプラインでの統合テスト自動化\\\"\n      }\n    ],\n    \\\"actionPlan\\\": [\n      {\n        \\\"step\\\": \\\"1. テンプレート関連コードの方針決定\\\",\n        \\\"owner\\\": \\\"t3ta\\\",\n        \\\"timeline\\\": \\\"即時（最優先）\\\"\n      },\n      {\n        \\\"step\\\": \\\"2. 参照エラーの一括解消戦略策定\\\",\n        \\\"owner\\\": \\\"開発チーム\\\",\n        \\\"timeline\\\": \\\"1-2日以内\\\"\n      },\n      {\n        \\\"step\\\": \\\"3. パッケージ責任境界の明確な定義文書作成\\\",\n        \\\"owner\\\": \\\"アーキテクト + t3ta\\\",\n        \\\"timeline\\\": \\\"スキーマパッケージ完成前\\\"\n      },\n      {\n        \\\"step\\\": \\\"4. 命名規則スタイルガイドの作成と適用\\\",\n        \\\"owner\\\": \\\"開発チーム\\\",\n        \\\"timeline\\\": \\\"リファクタリングフェーズの一部として\\\"\n      },\n      {\n        \\\"step\\\": \\\"5. V2互換性戦略の文書化と実装\\\",\n        \\\"owner\\\": \\\"スキーマ担当\\\",\n        \\\"timeline\\\": \\\"スキーマパッケージ公開前\\\"\n      }\n    ],\n    \\\"conclusion\\\": \\\"これらの重大な課題は、モノレポ構造の健全性と将来の拡張性に直接影響します。特にテンプレート関連コードの中途半端な状態と存在しないファイルへの参照は、ビルドエラーの直接の原因であり、最優先で解決すべき問題です。また、パッケージ間の責任境界の明確化は、アーキテクチャの一貫性と将来の拡張性にとって重要です。\\\",\n    \\\"followUpSchedule\\\": \\\"2025-04-05までに上記の課題への対応状況を確認し、必要に応じて追加の対策を講じる\\\"\n  }\n}\n"
  }
}
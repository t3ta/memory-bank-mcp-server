# アクティブコンテキスト

## 現在の作業内容

新しく考案された設計仕様に基づいて、JSONテンプレートシステムと多言語対応基盤を実装中。今日はコントローラとCLIコマンドの修正を実施しました。

## 最近の変更点

- テストファイルの修正完了：`createTemplateSection` → `createJsonTemplateSection`に修正
- コントローラの修正：
  - `BranchController` と `GlobalController` に `updateJsonIndex` メソッドを追加
  - インターフェースにも必要なメソッド定義を追加
- CLIコマンドの修正：
  - `build-index.ts` のコントローラー呼び出しエラーを修正
  - `list-json.ts` のパラメータ型とレスポンス構造を修正
  - `search-json.ts` の呼び出し方法を単純化
  - `update-json.ts` のレスポンス構造参照を修正
- DIコンテナの修正：
  - `providers.ts` のJSON関連ユースケース型を修正（`null` → `undefined`）

## アクティブな決定事項

- JSONテンプレートは「schema」、「metadata」、「content」という3つのメインセクションで構成する
- 言語ごとの文字列を保持するLanguageMapという型を導入
- セクションごとに任意/必須を明示できる設計とする
- 後方互換性のために旧形式のテンプレートのフォールバック機能を実装
- CLIコマンドのインターフェースは一貫性を持たせる
- コントローラのメソッドとインターフェースは同期して更新する

## 検討事項

- 将来的なテンプレートスキーマのバージョン管理方法
- 新しいドキュメントタイプが追加された場合の拡張性
- パフォーマンス最適化の検討（特に大量のテンプレートを扱う場合）
- テンプレートのバリデーションをUIに組み込む方法
- CLIコマンドのオプション名の統一（例：`documentType` vs `type`）

## 次のステップ

1. 残りのJSONコマンドのエラーチェック
2. 実際のユースケースでの使用テスト
3. パフォーマンス最適化の検討
4. テンプレート管理のためのCLI機能の拡充
5. PRでのレビューを経て本ブランチをマージ
